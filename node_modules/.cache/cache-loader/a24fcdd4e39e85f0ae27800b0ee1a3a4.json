{"remainingRequest":"/Users/anubz/Documents/Ativadores/ativador fetch carrosell/node_modules/babel-loader/lib/index.js!/Users/anubz/Documents/Ativadores/ativador fetch carrosell/node_modules/vue-loader/lib/selector.js?type=script&index=0!/Users/anubz/Documents/Ativadores/ativador fetch carrosell/src/components/comps/Foto.vue","dependencies":[{"path":"/Users/anubz/Documents/Ativadores/ativador fetch carrosell/src/components/comps/Foto.vue","mtime":1522696096518},{"path":"/Users/anubz/Documents/Ativadores/ativador fetch carrosell/package.json","mtime":1522335527175},{"path":"/Users/anubz/Documents/Ativadores/ativador fetch carrosell/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/anubz/Documents/Ativadores/ativador fetch carrosell/node_modules/babel-loader/lib/index.js","mtime":1519636541000},{"path":"/Users/anubz/Documents/Ativadores/ativador fetch carrosell/node_modules/vue-loader/lib/selector.js","mtime":1520395331000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//var firebase = require('firebase');\nvar $ = require('jquery');\n\nexport default {\n  name: 'foto',\n  data: function data() {\n    return {\n      msg: 'Escolher Arquivo',\n      image: '',\n      imageB: '',\n      urr: ''\n    };\n  },\n  methods: {\n    onFileChange: function onFileChange(e) {\n      var files = e.target.files || e.dataTransfer.files;\n      if (!files.length) return;\n      this.createImage(files[0]);\n      var file = e.target.files[0]; //var storageRef = firebase.storage().ref(file.name);\n\n      console.log('<filename >', file);\n      var metadata = {\n        contentType: 'image/jpeg'\n      };\n    },\n    createImage: function createImage(file) {\n      var image = new Image();\n      var reader = new FileReader();\n      var vm = this;\n\n      reader.onload = function (e) {\n        vm.image = e.target.result;\n        $(\"#lastIMG\").append('<img  src=\"' + vm.image + '\" width=\"100px\" height=\"auto\"/>');\n        var ind = new Date().toISOString();\n        var post = {\n          id: ind,\n          image: vm.image,\n          fileName: file.name,\n          user: 5585558\n        };\n        console.log('variavel>', post);\n        writeData('posts', post);\n\n        if ('indexedDB' in window) {\n          readAllData('posts').then(function (data) {\n            console.log('From cache', data);\n          });\n        }\n\n        ;\n        fetch('http://192.168.0.8/lambanca', {\n          method: 'POST',\n          headers: {\n            // 'dataType': 'json',\n            'Access-Control-Allow-Origin': '*/*',\n            'Content-Type': 'application/json',\n            'Accept': 'application/json'\n          },\n          dataType: 'json',\n          mode: 'cors',\n          body: JSON.stringify([post])\n        }).then(function (response) {\n          console.log(response);\n          return response.json();\n        }).then(function (data) {\n          console.log(data);\n        }).catch(function (err) {\n          console.log('******');\n        });\n        $(\"#imgLoad\").remove();\n      };\n\n      reader.readAsDataURL(file);\n      console.log('readerfile > ', reader); // use the Blob or File API\n\n      /*storageRef.put(reader).then(function(snapshot) {\n      \tconsole.log('Uploaded a blob or file!');\n      });*/\n      //console.log(image.innerText + '<kkkkk>');\n    },\n    removeImage: function removeImage(e) {\n      $(\"#lastIMG\").remove();\n    }\n  }\n};\nreadAllData('posts').then(function (data) {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = data[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var dt = _step.value;\n      $(\"#lastIMG\").append('<img  src=\"' + dt.image + '\" width=\"100px\" height=\"auto\"/>');\n      $(\"#imgf\").append('<img  src=\"' + dt.image + '\" width=\"100px\" height=\"auto\"/>');\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n});",{"version":3,"sources":["Foto.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAgBA;AACA;;AACA;QAEA;wBACA;;WAEA;aACA;cACA;WACA,AACA;AALA;AAMA;;;mDAGA;iBACA,QACA;6BACA;gCACA,GALA,CAMA;;iCACA;;qBAEA,AACA;AAFA;AAGA;;sBAEA;uBACA;eACA;;mCACA;4BACA;wDACA;6BACA;;cAEA;oBACA;yBACA;gBACA,AACA;AALA;iCAMA;2BACA;;mCACA;sBACA,8BACA;sCACA;AACA;AACA;;;;kBAEA;;AAEA;2CACA;4BACA;sBACA,AACA;AALA;oBAMA;gBACA;gCACA;AAVA,oCAWA;sBACA;0BACA;gCAEA;sBACA;AACA,gCACA;sBACA;AACA;sBACA;AACA;;2BACA;mCACA,QA9CA,CA+CA;;AACA,AACA,AACA;;;AACA;AACA;yCACA;oBACA;AACA,AACA;AArEA;AAVA;AAgFA,YACA;AACA;;;;;;AACA;sDACA;mDACA;AACA","file":"Foto.vue","sourceRoot":"src/components/comps","sourcesContent":["<template>\n  <div class=\"foto\">\n    <h1>{{ msg }}</h1>\n      <div v-if=\"!image\">\n    <input id=\"inputF\" type=\"file\" accept=\"video/*;capture=camcorder\" @change=\"onFileChange\">\n  </div>\n  <div v-else>\n    <img id=\"imgLoad\" :src=\"image\" width=\"100px\" height=\"100px\"/>\n      <input id=\"inputF\" type=\"file\" accept=\"video/*;capture=camcorder\" @change=\"onFileChange\">\n   <button @click=\"removeImage\">Remove image</button>\n  </div>\n     <div id=\"lastIMG\"> \n    </div>\n  </div>\n</template>\n<script>\n    //var firebase = require('firebase');\n    var $ = require('jquery')\n    export default {\n        name: 'foto',\n        data() {\n            return {\n                msg: 'Escolher Arquivo',\n                image: '',\n                imageB: '',\n                urr: ''\n            }\n        },\n        methods: {\n            onFileChange(e) {\n                var files = e.target.files || e.dataTransfer.files;\n                if (!files.length)\n                    return;\n                this.createImage(files[0]);\n                var file = e.target.files[0];\n                //var storageRef = firebase.storage().ref(file.name);\n                console.log('<filename >', file);\n                var metadata = {\n                    contentType: 'image/jpeg'\n                };\n            },\n            createImage(file) {\n                var image = new Image();\n                var reader = new FileReader();\n                var vm = this;\n                reader.onload = (e) => {\n                    vm.image = e.target.result;\n                    $(\"#lastIMG\").append('<img  src=\"' + vm.image + '\" width=\"100px\" height=\"auto\"/>');\n                    var ind = new Date().toISOString();\n                    var post = {\n                        id: ind,\n                        image: vm.image,\n                        fileName: file.name,\n                        user: 5585558\n                    };\n                    console.log('variavel>', post);\n                    writeData('posts', post);\n                    if ('indexedDB' in window) {\n                        readAllData('posts')\n                            .then(function(data) {\n                                console.log('From cache', data);\n                            });\n                    };\n                    fetch('http://192.168.0.8/lambanca', {\n                            method: 'POST',\n                            headers: {\n                                // 'dataType': 'json',\n                                'Access-Control-Allow-Origin': '*/*',\n                                'Content-Type': 'application/json',\n                                'Accept': 'application/json'\n                            },\n                            dataType: 'json',\n                            mode: 'cors',\n                            body: JSON.stringify([post])\n                        }).then(function(response) {\n                            console.log(response);\n                            return response.json();\n                        }).then(function (data) {\n                        \n                        console.log(data);\n                    })\n                        .catch(function(err) {\n                            console.log('******');\n                        });\n                    $(\"#imgLoad\").remove();\n                };\n                reader.readAsDataURL(file);\n                console.log('readerfile > ', reader);\n                // use the Blob or File API\n                /*storageRef.put(reader).then(function(snapshot) {\n                \tconsole.log('Uploaded a blob or file!');\n                });*/\n                //console.log(image.innerText + '<kkkkk>');\n            },\n            removeImage: function(e) {\n                $(\"#lastIMG\").remove();\n            },\n        }\n    };\n    readAllData('posts')\n        .then(function(data) {\n            for (var dt of data) {\n                $(\"#lastIMG\").append('<img  src=\"' + dt.image + '\" width=\"100px\" height=\"auto\"/>');\n                $(\"#imgf\").append('<img  src=\"' + dt.image + '\" width=\"100px\" height=\"auto\"/>');\n            }\n        })\n\n</script>\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n    h1,\n    h2,\n    p {\n        font-weight: normal;\n        color: beige;\n    }\n\n</style>\n"]}]}